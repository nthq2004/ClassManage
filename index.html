<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <!--<meta name="viewport"
        content="width=device-width, initial-scale=1.0, user-scalable=yes, viewport-fit=cover">--->
    <title>仿真系统</title>
    <link rel="stylesheet" href="style.css">
    <script src="konva.min.js"></script>
</head>

<body>
    <div id="app"> <!--这是主界面-->
        <div id="sidebar" class="hide"> <!--这是侧边栏-->
            <div class="sidebar-header"> <!--这是班级标签和班级选择框组合，用两个SPAN使得它们横向排列-->
                <select id="clsSel" onchange="onClassChange(this.value)"></select>
            </div>
            <div id="student-list-container"> <!--这是学生在线学生文字和学生列表组合框-->
                <div class="list-title">在线学生</div>
                <div id="student-list"></div>
            </div>
        </div>

        <div id="main"> <!--这是主显示区-->
            <div id="info-bar"> <!--这是信息栏-->
                <div class="info-left"> <!--左侧显示 班级、姓名、在线-->
                    <span id="u-class">---</span> | <span id="u-name">---</span>
                    <span class="status-dot">● 在线</span>
                </div>
                <div id="mode-display" class="mode-tag">自由训练模式</div>
                <div id="te-tools" class="mode-switcher hide"> <!--3个按钮控制工作模式-->
                    <button class="m-btn" data-mode="PRACTICE" onclick="setMode('PRACTICE')">演练</button>
                    <button class="m-btn" data-mode="DEMO" onclick="setMode('DEMO')">演示</button>
                    <button class="m-btn active" data-mode="TRAIN" onclick="setMode('TRAIN')">训练</button>
                </div>
                <button class="btn-logout" onclick="logout()">注销系统</button>
            </div>
            <div id="toolbar">  <!--这是工具栏，包含11个按钮，分别是撤销、恢复、自动接线、5点步进、流程演练、单步演示、完整演示、参数设置、重置、评估测试、理论测试-->
                <button id="btnUndo" title="撤销上一步">撤销</button>
                <button id="btnRedo" title="恢复上一步">恢复</button>
                <button id="btnAutoWire" title="自动完成所有接线">自动接线</button>
                <button id="btnStep5" title="依次设定调压阀输出压力0-0.25-0.5-0.75-1">5点步进</button>
                <button id="btnWorkflow" title="对操作流程进行演练">流程演练</button>

                <button id="btnStep" title="单步演示">单步演示</button>
                <button id="btnOpDemo" title="实验步骤完整演示">完整演示</button>

                <button id="btnSet" title="设置压力变送器量程和压力表量程">参数设置</button>
                <button id="btnReset" title="实验重置">重置</button>
                <button id="btnTest" title="评估测试">评估测试</button>
                <button id="btnTheory" title="理论测试">理论测试</button>
            </div>
            <div id="container"></div> <!--这是画布，画仿真系统-->

            <div id="status-bar"> <!--这是底部状态栏-->
                <div id="status-left">系统就绪</div>
                <div id="status-mid"></div>
                <div id="status-right">V0.1 Engine</div>
            </div>
        </div>
    </div>

    <div id="login-overlay" style="display:none"><!--这是注册界面,外面的遮盖层-->
        <div class="login-box"> <!--这是真正的登录框，从上往下依次是标题框、选择框、姓名输入框、班级学号组合输入、邀请码组合输入、登录按钮-->
            <h2>仿真系统登录</h2>
            <select id="roleSel" onchange="toggleFields(this.value)"> <!--这是角色选择-->
                <option value="STUDENT">我是学生</option>
                <option value="TEACHER">我是教师</option>
            </select>
            <input type="text" id="loginName" placeholder="输入姓名">
            <div id="st-fields">
                <input type="text" id="loginClass" placeholder="输入班级 (新班级自动注册)">
                <input type="text" id="loginSid" placeholder="输入学号">
            </div>
            <div id="te-fields" class="hide">
                <input type="password" id="teCode" placeholder="教师邀请码">
            </div>
            <button class="btn-primary" onclick="doLogin()">进入仿真系统</button>
        </div>
    </div>
    <script type="module" src="main.js"></script> <!--这是主程序-->
</body>

</html>
<!--1.登录界面两个函数，角色选择时，切换邀请码输入、班级学号输入，教师不用输入班级-->
<!--进入仿真系统的函数是doLogin(),没有参数；切换角色的参数是字符串“STUDENT”或者“TEACHER-->
<!---->
<!---->