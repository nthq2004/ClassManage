<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>船舶柴油机冷却水仿真系统</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/konva@9/konva.min.js"></script>
</head>
<body>
    <div id="app">  <!--这是主界面-->
        <div id="sidebar" class="hide">  <!---->这是侧边栏
            <div class="sidebar-header">
                <label>班级选择</label>
                <select id="clsSel" onchange="onClassChange(this.value)"></select>
            </div>
            <div id="student-list-container">
                <div class="list-title">在线学生列表</div>
                <div id="student-list"></div>
            </div>
        </div>

        <div id="main">  <!--这是主显示区-->
            <div id="info-bar">  <!--这是信息栏-->
                <div class="info-left">  <!--左侧显示 班级、姓名、在线-->
                    <span id="u-class">---</span> | <span id="u-name">---</span>
                    <span class="status-dot">● 在线</span>
                </div>
                <div id="mode-display" class="mode-tag">自由训练模式</div>
                <div id="te-tools" class="mode-switcher hide">  <!--3个按钮控制工作模式-->
                    <button class="m-btn" onclick="setMode('PRACTICE')">演练</button>
                    <button class="m-btn" onclick="setMode('DEMO')">演示</button>
                    <button class="m-btn active" onclick="setMode('TRAIN')">训练</button>
                </div>
                <button class="btn-logout" onclick="logout()">注销系统</button>
            </div>

            <div id="container"></div>   <!--这是画布，画仿真系统-->

            <div id="status-bar">    <!--这是底部状态栏-->
                <div id="status-left">系统就绪</div>
                <div id="status-mid">准备中...</div>
                <div id="status-right">V3.5 Engine</div>
            </div>
        </div>
    </div>

    <div id="login-overlay" style="display:none"><!--这是注册界面-->
        <div class="login-box">
            <h2>仿真系统登录</h2>
            <select id="roleSel" onchange="toggleFields(this.value)"> <!--这是角色选择-->
                <option value="STUDENT">我是学生</option>
                <option value="TEACHER">我是教师</option>
            </select>
            <input type="text" id="loginName" placeholder="输入姓名">
            <div id="st-fields">
                <input type="text" id="loginClass" placeholder="输入班级 (新班级将自动注册)">
                <input type="text" id="loginSid" placeholder="输入学号">
            </div>
            <div id="te-fields" class="hide">
                <input type="password" id="teCode" placeholder="教师邀请码">
            </div>
            <button class="btn-primary" onclick="doLogin()">进入仿真系统</button>
        </div>
    </div>
    <script type="module" src="main.js"></script>  <!--这是主程序-->
</body>
</html>